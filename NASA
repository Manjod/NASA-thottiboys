<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Video Menu</title>
  <style>
    /* Your existing CSS styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body, html {
      height: 100%;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    .video-container {
      position: relative;
      width: 100%;
      height: 100%;
      background-color: black;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .menu-overlay {
      position: absolute;
      top: 0;
      right: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 10px;
    }

    .menu-overlay button {
      padding: 10px;
      font-size: 18px;
      background-color: #00008B;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .menu-overlay button:hover {
      background-color: #ff0000;
    }
  </style>
</head>
<body>

<div class="video-container">
  <!-- Video Element -->
  <video id="mainVideo" autoplay muted>
    <source id="videoSource" src="Intro ogogogogog.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Menu Overlay for Buttons (hidden initially) -->
  <div class="menu-overlay" id="menuOverlay" style="display: none;">
    <button onclick="playFullscreenVideo('Cluster ogogogo.mp4')">CLUSTER</button>
    <button onclick="playFullscreenVideo('Nebula ogogogogoog.mp4')">NEBULA</button>
    <button onclick="playFullscreenVideo('Phenomenas ogogogogo.mp4')">PHENOMENAS</button>
    <button onclick="playFullscreenVideo('overview.mp4')">OVERVIEW</button>
    <button onclick="playFullscreenVideo('Intro ogogogogog.mp4')">INTRO</button>
    <button onclick="quitApp()">Quit</button> <!-- Quit button -->
  </div>
</div>

<script>
  const mainVideo = document.getElementById('mainVideo');
  const videoSource = document.getElementById('videoSource');
  const menuOverlay = document.getElementById('menuOverlay');

  let isIntroPlaying = true;
  let isFullscreenVideoPlaying = false;
  let currentAudio = null;

  // Function to play intro video
  function playIntro() {
    mainVideo.play();
    enableAudio(); // Enable audio for the intro
  }

  // Function to show menu with the background video (background.mp4)
  function showMenuWithBackground() {
    // Set the background.mp4 as the video source
    videoSource.src = 'background.mp4';
    mainVideo.load();
    mainVideo.play();
    mainVideo.loop = true;  // Loop the background video

    // Show the menu
    menuOverlay.style.display = 'flex';
    isIntroPlaying = false;
    isFullscreenVideoPlaying = false;
  }

  // Quit the app by closing the window
  function quitApp() {
    if (confirm("Are you sure you want to quit?")) {
      window.open('', '_self', ''); // Open a new self-reference window (to bypass some browser restrictions)
      window.close();               // Try to close the window
    }
  }

  // Function to play a video in fullscreen with synchronized audio
  function playFullscreenVideo(videoSrc) {
    // Set the video source to the selected video
    videoSource.src = videoSrc;
    mainVideo.load();
    mainVideo.play();
    mainVideo.loop = false;
    isFullscreenVideoPlaying = true;

    // Hide the menu
    menuOverlay.style.display = 'none';

    // Enter fullscreen mode
    const videoContainer = document.querySelector('.video-container');
    if (videoContainer.requestFullscreen) {
      videoContainer.requestFullscreen();
    } else if (videoContainer.mozRequestFullScreen) { // Firefox
      videoContainer.mozRequestFullScreen();
    } else if (videoContainer.webkitRequestFullscreen) { // Chrome, Safari, and Opera
      videoContainer.webkitRequestFullscreen();
    } else if (videoContainer.msRequestFullscreen) { // IE/Edge
      videoContainer.msRequestFullscreen();
    }
  }

  // Function to stop current audio
  function stopAudio() {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }
  }

  // Event listener for the end of the video (intro or full-screen video)
  mainVideo.addEventListener('ended', function() {
    if (isIntroPlaying) {
      showMenuWithBackground();
    } else if (isFullscreenVideoPlaying) {
      exitFullscreenAndReturnToMenu();
    }
  });

  // Function to exit fullscreen and return to the menu with the background video
  function exitFullscreenAndReturnToMenu() {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.mozCancelFullScreen) { // Firefox
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) { // Chrome, Safari, and Opera
      document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) { // IE/Edge
      document.msExitFullscreen();
    }

    // Stop video audio
    stopAudio();

    // Reset to the background video and show the menu
    showMenuWithBackground();
  }

  // Wait for user interaction to enable audio
  window.addEventListener('click', enableAudio);
  
  // Enable audio after user interaction (required for browsers)
  function enableAudio() {
    mainVideo.muted = false;
  }

  // Play intro video and its audio on load
  window.onload = playIntro;
</script>

</body>
</html>
